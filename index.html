<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Official archive for @brokeninstitutions investigations into institutional failures and accountability">
    <meta name="keywords" content="institutional accountability, documentation, investigative journalism, transparency">
    <title>Broken Institutions - Investigation Archive</title>
    <script>
        // Apply theme BEFORE CSS loads - prevents flicker
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'light') {
            document.documentElement.setAttribute('data-theme', 'light');
        }
    </script>
    <style>
        /* Initial theme based on data attribute */
        html[data-theme="light"] body {
            background-color: #f8f9fa !important;
            color: #2c3e50 !important;
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: #e9ecef;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: #121212;
            min-height: 100vh;
            transition: all 0.3s ease;
        }

        /* ======= HEADER SECTION ======= */
        .header {
            text-align: center;
            border-bottom: 3px solid #1e40af;
            margin-bottom: 40px;
            padding-bottom: 30px;
            position: relative;
        }

        .logo {
            background-color: #1e40af;
            color: white;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 20px;
            box-shadow: 0 6px 12px rgba(30, 64, 175, 0.4);
        }

        h1 {
            color: #e1e5e9;
            margin-bottom: 15px;
            font-size: 2.8em;
            font-weight: 700;
        }

        .tagline {
            color: #adb5bd;
            font-weight: 400;
            margin-bottom: 20px;
            font-size: 1.3em;
        }

        .description {
            color: #6c757d;
            font-size: 1.1em;
            max-width: 700px;
            margin: 0 auto;
            line-height: 1.3;
        }

        .description a {
            color: #1e40af;
            text-decoration: none;
        }

        .description a:hover {
            text-decoration: underline;
        }

        /* Theme Toggle */
        .mobile-header-toggle {
            display: none;
        }

        .theme-toggle {
            background: #4a5568;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 4px;
            position: absolute;
            top: 20px;
            right: 20px;
            width: 60px;
            height: 30px;
            transition: all 0.4s cubic-bezier(0.23, 1, 0.320, 1);
            outline: none;
            overflow: hidden;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }

        .theme-toggle:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }

        .theme-toggle:focus {
            box-shadow: 0 0 0 3px rgba(30, 64, 175, 0.3);
        }

        .theme-toggle.light {
            background: #e2e8f0;
        }

        .theme-toggle.light:hover {
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        }

        .theme-toggle::before {
            content: '';
            position: absolute;
            top: 2px;
            left: 2px;
            width: 26px;
            height: 26px;
            background: white;
            border-radius: 50%;
            transition: all 0.4s cubic-bezier(0.23, 1, 0.320, 1);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            z-index: 2;
        }

        .theme-toggle.light::before {
            transform: translateX(30px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .toggle-icon {
            position: absolute;
            font-size: 12px;
            transition: all 0.4s ease;
            z-index: 1;
            opacity: 1.0;
            pointer-events: none;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }

        .toggle-icon.moon {
            left: 6px;
            top: 50%;
            transform: translateY(-50%);
        }

        .toggle-icon.sun {
            right: 6px;
            top: 50%;
            transform: translateY(-50%);
        }

        .theme-toggle:not(.light) .toggle-icon.moon {
            opacity: 1;
            color: white;
        }

        .theme-toggle.light .toggle-icon.sun {
            opacity: 1;
            color: #f56565;
        }

        /* ======= TAB SYSTEM ======= */
        .tab-container {
            margin-bottom: 40px;
        }

        .tab-navigation {
            display: flex;
            background: #1e1e1e;
            border-radius: 12px 12px 0 0;
            overflow: hidden;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .tab-button {
            flex: 1;
            background: #2d3436;
            color: #adb5bd;
            border: none;
            padding: 20px 15px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 600;
            transition: all 0.3s ease;
            border-right: 1px solid #333;
            position: relative;
        }

        .tab-button:last-child {
            border-right: none;
        }

        .tab-button:hover {
            background: #636e72;
            color: #e9ecef;
        }

        .tab-button.active {
            background: #1e40af;
            color: white;
            transform: translateY(-2px);
        }

        .tab-button.active::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: #1e40af;
        }

        .tab-content {
            background: #1e1e1e;
            border-radius: 0 0 12px 12px;
            min-height: 500px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .tab-panel {
            display: none;
            animation: fadeIn 0.3s ease-in-out;
        }

        .tab-panel.active {
            display: block;
        }

        /* Specific padding for each tab */
        #investigations {
            padding: 30px;
        }

        #about {
            padding: 15px 30px 30px;
        }

        #methodology {
            padding: 20px 30px 30px;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ======= INVESTIGATIONS CONTENT ======= */
        .search-filters {
            background: transparent;
            padding: 0;
            margin: 0 0 20px 0;
        }

        .search-bar {
            display: flex;
            gap: 15px;
            justify-content: space-between;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .search-input {
            flex: 1;
            min-width: 250px;
            padding: 12px 15px;
            border: 1px solid #333;
            border-radius: 6px;
            background: #2d3436;
            color: #e9ecef;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        .search-input:focus {
            outline: none;
            border-color: #1e40af;
            box-shadow: 0 0 0 2px rgba(30, 64, 175, 0.2);
        }

        .filter-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .filter-select {
            padding: 10px 28px 10px 12px;
            border: 1px solid #333;
            border-radius: 6px;
            background: #2d3436;
            color: #e9ecef;
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.3s ease;
            appearance: none;
            background-repeat: no-repeat;
            background-position: right 8px center;
            background-size: 12px;
        }

        .filter-select:focus {
            outline: none;
            border-color: #1e40af;
        }

        /* Dark theme arrows */
        body:not(.light-theme) .filter-select {
            background-image: url('data:image/svg+xml;charset=US-ASCII,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 4 5"><path fill="%23adb5bd" d="M2 0L0 2h4zm0 5L0 3h4z"/></svg>');
        }

        /* Light theme arrows */
        body.light-theme .filter-select {
            background-image: url('data:image/svg+xml;charset=US-ASCII,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 4 5"><path fill="%23495057" d="M2 0L0 2h4zm0 5L0 3h4z"/></svg>');
            background-repeat: no-repeat;
            background-position: right 8px center;
            background-size: 12px;
        }

        .results-count {
            color: #adb5bd;
            font-size: 0.9em;
            margin-top: 10px;
        }

        .case-card {
            background: #2d3436;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 8px 16px rgba(0,0,0,0.3);
            transition: all 0.3s ease;
            margin-bottom: 20px;
            display: block;
        }

        .case-card:hover {
            transform: translateY(-5px);
        }

        .case-card.featured {
            position: relative;
            background: url('cases/charlotte-transit/assets/case-image.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            min-height: 350px;
            display: flex;
            align-items: center;
        }

        .case-overlay {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: radial-gradient(ellipse at center, rgba(0,0,0,0.0) 20%, rgba(0,0,0,0.35) 80%);
            padding: 30px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .case-card.featured .case-title {
            color: #ffffff;
            font-size: 1.8em;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            margin-bottom: 15px;
            line-height: 1.2;
        }

        .case-card.featured .case-meta {
            display: flex;
            gap: 15px;
            justify-content: flex-start;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .case-card.featured .case-meta span {
            background: rgba(0,0,0,0.7);
            color: #ffffff;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.9em;
            font-weight: 500;
        }

        .case-card.featured .case-summary {
            color: #e9ecef;
            font-size: 1.1em;
            line-height: 1.5;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.8);
            margin-bottom: 25px;
        }

        .case-card.featured .case-links {
            display: flex;
            gap: 15px;
            justify-content: flex-start;
            flex-wrap: wrap;
        }

        .case-link {
            background: rgba(30,64,175,1.0);
            color: #ffffff;
            padding: 12px 20px;
            border-radius: 6px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            border: 1px solid #ffffff;
        }

        .case-link:hover {
            background: #1d4ed8;
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .case-link.secondary {
            background: rgba(30,64,175,1.0);
            border: 1px solid rgba(255,255,255,0.3);
        }

        .case-link.secondary:hover {
            background: #1d4ed8;
        }

        /* ======= ABOUT & METHODOLOGY CONTENT ======= */
        .content-section h2 {
            color: #f8f9fa;
            border-bottom: 2px solid #333;
            padding-bottom: 10px;
            margin-top: 30px;
            margin-bottom: 20px;
            font-size: 1.6em;
        }

        .content-section h2:first-child {
            margin-top: 0;
        }

        .content-section h3 {
            color: #f8f9fa;
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 1.2em;
        }

        .content-section p {
            margin-bottom: 20px;
            color: #ced4da;
            font-size: 1.05em;
        }

        .content-section ul, .content-section ol {
            margin-left: 25px;
            margin-bottom: 20px;
            color: #ced4da;
        }

        .content-section li {
            margin-bottom: 8px;
        }

        .mission-box {
            background: #2d3436;
            border-left: 4px solid #1e40af;
            padding: 25px;
            margin: 10px 0 25px;
            border-radius: 8px;
        }

        .mission-box h3 {
            color: #f8f9fa;
            margin-top: 0;
            margin-bottom: 15px;
            font-size: 1.3em;
            border-bottom: 1px solid #1e40af;
            padding-bottom: 8px;
        }

        .mission-box p {
            color: #ced4da;
            margin-bottom: 0;
            font-size: 1.1em;
            font-weight: 500;
        }

        .values-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 25px 0;
        }

        .value-card {
            background: #2d3436;
            padding: 20px;
            border-radius: 8px;
            border-left: 4px solid #28a745;
        }

        .value-card h4 {
            color: #28a745;
            margin-bottom: 10px;
            font-size: 1.1em;
            border-bottom: 1px solid #28a745;
            padding-bottom: 8px;
        }

        .value-card p {
            color: #ced4da;
            margin-bottom: 0;
            font-size: 0.95em;
        }

        .methodology-step {
            background: #2d3436;
            border-left: 4px solid #1e40af;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .methodology-step h4 {
            color: #f8f9fa;
            margin-bottom: 10px;
            font-size: 1.1em;
            border-bottom: 1px solid #1e40af;
            padding-bottom: 8px;
        }

        .methodology-step p {
            color: #ced4da;
            margin-bottom: 0;
        }

        .process-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .process-card {
            background: #2d3436;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .process-number {
            background: #1e40af;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .process-title {
            color: #e1e5e9;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 0.9em;
        }

        .process-description {
            color: #adb5bd;
            font-size: 0.8em;
            line-height: 1.4;
        }

        /* ======= FOOTER ======= */
        .footer {
            text-align: center;
            margin-top: 60px;
            padding-top: 40px;
            border-top: 1px solid #333;
            color: #6c757d;
        }

        .footer a {
            color: #1e40af;
            text-decoration: none;
        }

        .footer a:hover {
            text-decoration: underline;
        }


        /* ======= LIGHT THEME ======= */
        .light-theme {
            background-color: #f8f9fa;
            color: #2c3e50;
        }

        .light-theme h1 {
            color: #2c3e50;
        }

        .light-theme .tagline {
            color: #5a6c7d;
        }

        .light-theme .description {
            color: #34495e;
        }

        .light-theme .tab-navigation {
            background: #f1f3f4;
        }

        .light-theme .tab-button {
            background: #ffffff;
            color: #2c3e50;
            border-right: 1px solid #e1e5e9;
        }

        .light-theme .tab-button:hover {
            background: #e8f0fe;
            color: #2c3e50;
        }

        .light-theme .tab-content {
            background: #ffffff;
        }

        .light-theme .search-input {
            background: #ffffff;
            color: #2c3e50;
            border: 1px solid #d1d9e0;
        }

        .light-theme .search-input:focus {
            border-color: #1e40af;
            box-shadow: 0 0 0 2px rgba(30, 64, 175, 0.2);
        }

        .light-theme .filter-select {
            background: #ffffff;
            color: #2c3e50;
            border: 1px solid #d1d9e0;
        }

        .light-theme .filter-select:focus {
            border-color: #1e40af;
        }

        .light-theme .results-count {
            color: #5a6c7d;
        }

        .light-theme .case-card {
            background: #ffffff;
            box-shadow: 0 8px 16px rgba(0,0,0,0.08);
        }

        .light-theme .case-card.featured {
            background: url('cases/charlotte-transit/assets/case-image.jpg');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }


        .light-theme .footer {
            border-top: 1px solid #e1e5e9;
            color: #5a6c7d;
        }

        .light-theme .content-section p {
            color: #34495e;
        }

        .light-theme .content-section ul, .light-theme .content-section ol {
            color: #34495e;
        }

        .light-theme .content-section h2, .light-theme .content-section h3 {
            color: #2c3e50;
        }

        .light-theme .mission-box h3, .light-theme .methodology-step h4 {
            color: #2c3e50;
        }

        .light-theme .value-card h4 {
            color: #27ae60;
        }

        .light-theme .process-title {
            color: #2c3e50;
            font-weight: 700;
        }

        .light-theme .process-description {
            color: #5a6c7d;
            font-weight: 500;
        }

        .light-theme .value-card, .light-theme .methodology-step, .light-theme .process-card {
            background: #f8f9fa;
        }

        .light-theme .mission-box {
            background: #f8f9fa;
        }

        /* ======= MOBILE STYLES ======= */
        @media (max-width: 768px) {
            body {
                padding: 15px;
            }

            h1 {
                font-size: 2.2em;
            }

            .tagline {
                font-size: 1.1em;
            }

            .description {
                font-size: 1em;
                line-height: 1.4;
            }

            .theme-toggle:not(.mobile-header-toggle) {
                display: none;
            }

            .mobile-header-toggle {
                position: absolute;
                top: 20px;
                right: 20px;
                margin: 0;
                display: block;
            }

            .tab-navigation {
                flex-direction: column;
            }

            .tab-button {
                border-right: none;
                border-bottom: 1px solid #333;
            }

            .tab-button:last-child {
                border-bottom: none;
            }

            #investigations {
                padding: 15px 20px 20px;
            }

            #about {
                padding: 8px 20px 20px;
            }

            #methodology {
                padding: 10px 20px 20px;
            }

            .search-bar {
                flex-direction: column;
                margin-bottom: 15px;
            }

            .search-input {
                min-width: 100%;
                margin-bottom: 10px;
            }

            .filter-controls {
                flex-direction: column;
                gap: 8px;
                align-items: stretch;
            }

            .filter-select {
                width: 100%;
                padding: 12px 28px 12px 12px;
                font-size: 16px;
            }

            .case-card.featured {
                min-height: 580px;
                margin-bottom: 20px;
            }

            .case-overlay {
                padding: 15px;
            }

            .case-card.featured .case-title {
                font-size: 1.3em;
            }

            .case-card.featured .case-summary {
                font-size: 0.9em;
            }

            .case-card.featured .case-meta {
                display: none;
            }

            .case-card.featured {
                min-height: 450px;
            }

            .case-card.featured .case-summary {
                margin-bottom: 15px;
                margin-top: 15px;
                flex-grow: 1;
            }

            .case-card.featured .case-overlay {
                display: flex;
                flex-direction: column;
                height: 100%;
                padding-bottom: 20px;
                box-sizing: border-box;
            }

            .case-card.featured .case-links {
                margin-top: auto;
                flex-direction: column;
                gap: 8px;
                flex-shrink: 0;
            }

            .case-link {
                text-align: center;
                width: 100%;
            }

            .values-grid {
                grid-template-columns: 1fr;
            }

            .process-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <script>
        // Apply theme class to body based on data attribute
        if (document.documentElement.getAttribute('data-theme') === 'light') {
            document.body.className = 'light-theme';
        }
    </script>
    <!-- ======= HEADER SECTION ======= -->
    <div class="header">
        <div class="theme-toggle mobile-header-toggle">
            <span class="toggle-icon moon">🌙</span>
            <span class="toggle-icon sun">☀️</span>
        </div>
        <div class="logo">BI</div>
        <h1>Broken Institutions</h1>
        <div class="tagline">Institutional failures worldwide. We name names.</div>
        <div class="description">
            Independent accountability journalism. Exposing broken systems and demanding real consequences - from courts to governments, from social media to influencers.
        </div>
        <div class="theme-toggle">
            <span class="toggle-icon moon">🌙</span>
            <span class="toggle-icon sun">☀️</span>
        </div>
    </div>

    <!-- ======= TAB SYSTEM ======= -->
    <div class="tab-container">
        <div class="tab-navigation">
            <button class="tab-button active" onclick="openTab(event, 'investigations')">Investigations</button>
            <button class="tab-button" onclick="openTab(event, 'about')">About Our Work</button>
            <button class="tab-button" onclick="openTab(event, 'methodology')">Methodology</button>
        </div>

        <div class="tab-content">
            <!-- INVESTIGATIONS TAB -->
            <div id="investigations" class="tab-panel active">
                <div class="search-filters">
                    <div class="search-bar">
                        <input type="text" id="searchInput" class="search-input" placeholder="Search investigations by title, description, or keywords...">
                    </div>
                    <div class="filter-controls">
                        <select id="categoryFilter" class="filter-select">
                            <option value="">All Categories</option>
                            <option value="Judicial System">Judicial System</option>
                            <option value="Public Policy">Public Policy</option>
                            <option value="Corporate Accountability">Corporate Accountability</option>
                            <option value="Government Oversight">Government Oversight</option>
                        </select>
                        <select id="tagFilter" class="filter-select">
                            <option value="">All Tags</option>
                            <option value="judicial immunity">Judicial Immunity</option>
                            <option value="pre-trial release">Pre-trial Release</option>
                            <option value="mental health">Mental Health</option>
                            <option value="public safety">Public Safety</option>
                            <option value="institutional failure">Institutional Failure</option>
                        </select>
                        <select id="sortFilter" class="filter-select">
                            <option value="newest">Newest First</option>
                            <option value="oldest">Oldest First</option>
                            <option value="title">Alphabetical</option>
                        </select>
                    </div>
                    <div id="resultsCount" class="results-count">Showing investigations...</div>
                </div>

                <div id="casesContainer">
                    <!-- Charlotte Transit Case -->
                    <div class="case-card featured" data-category="Judicial System" data-tags="judicial immunity,pre-trial release,mental health,public safety,institutional failure">
                        <div class="case-overlay">
                            <h2 class="case-title">Charlotte Transit Case: "What Enabled Him?"</h2>
                            <div class="case-meta">
                                <span>Judicial System</span>
                                <span>judicial immunity</span>
                                <span>pre-trial release</span>
                                <span>mental health</span>
                                <span>public safety</span>
                                <span>institutional failure</span>
                            </div>
                            <div class="case-summary">Investigation into institutional failures that enabled the Charlotte transit tragedy. Examining 14 arrests, judicial decisions, and systemic breakdowns that preceded the fatal incident.</div>
                            <div class="case-links">
                                <a href="cases/charlotte-transit/article.html" class="case-link">Read Full Investigation</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- ABOUT TAB -->
            <div id="about" class="tab-panel content-section">
                <div class="mission-box">
                    <h3>Our Mission</h3>
                    <p>To expose institutional failures, promote transparency, and demand accountability from public officials whose decisions impact citizen safety and welfare.</p>
                </div>

                <h2>What We Do</h2>
                <p>Broken Institutions is dedicated to researching and documenting institutional failures that compromise public safety and democratic accountability. We focus on cases where systemic breakdowns enable preventable tragedies, examining the decision-making processes, policies, and officials responsible.</p>

                <p>Our investigations combine traditional investigative journalism with comprehensive source documentation, providing transparent, evidence-based analysis of institutional decision-making and its consequences.</p>

                <h2>Our Approach</h2>

                <h3>Evidence-Based Investigation</h3>
                <p>Every claim we make is backed by verifiable sources. We prioritize official government documents, court records, and verified news sources, ensuring our investigations meet the highest standards of accuracy and reliability.</p>

                <h3>Transparency and Accountability</h3>
                <p>We believe transparency drives accountability. All our sources are documented and made publicly available, allowing readers to verify our findings and draw their own conclusions from the evidence.</p>

                <h3>Focus on Systemic Issues</h3>
                <p>While individual cases provide the human element of our stories, our primary focus is on identifying and exposing systemic patterns that enable institutional failures across jurisdictions and time periods.</p>

                <h2>Core Values</h2>

                <div class="values-grid">
                    <div class="value-card">
                        <h4>Accuracy</h4>
                        <p>Every fact is verified through multiple sources and cross-referenced for accuracy.</p>
                    </div>
                    <div class="value-card">
                        <h4>Transparency</h4>
                        <p>All sources and methodologies are documented and made publicly available.</p>
                    </div>
                    <div class="value-card">
                        <h4>Integrity</h4>
                        <p>We maintain strict ethical standards and avoid sensationalism in favor of factual reporting.</p>
                    </div>
                    <div class="value-card">
                        <h4>Independence</h4>
                        <p>Our investigations are driven by evidence and public interest, not political or financial considerations.</p>
                    </div>
                </div>

                <h2>Focus Areas</h2>

                <h3>Judicial System Accountability</h3>
                <ul>
                    <li>Pre-trial release decisions and their consequences</li>
                    <li>Competency evaluations and procedural delays</li>
                    <li>Judicial immunity and accountability mechanisms</li>
                    <li>Sentencing disparities and systemic patterns</li>
                </ul>

                <h3>Public Policy Analysis</h3>
                <ul>
                    <li>Immigration enforcement and safety protocols</li>
                    <li>Mental health systems and institutional oversight</li>
                    <li>Public safety decision-making and resource allocation</li>
                    <li>Government transparency and FOIA processes</li>
                </ul>

                <h3>International Comparisons</h3>
                <ul>
                    <li>Comparative analysis of institutional systems</li>
                    <li>Best practices from international jurisdictions</li>
                    <li>Evidence-based policy recommendations</li>
                    <li>Reform success stories and implementation strategies</li>
                </ul>
            </div>

            <!-- METHODOLOGY TAB -->
            <div id="methodology" class="tab-panel content-section">
                <h2>Our Investigative Process</h2>

                <p>Our methodology combines traditional investigative journalism techniques with systematic documentation processes to ensure accuracy, transparency, and accountability in our reporting.</p>

                <div class="process-grid">
                    <div class="process-card">
                        <div class="process-number">1</div>
                        <div class="process-title">Case Identification</div>
                        <div class="process-description">Focus on recent institutional failures with clear documentation and public safety implications</div>
                    </div>
                    <div class="process-card">
                        <div class="process-number">2</div>
                        <div class="process-title">Source Collection</div>
                        <div class="process-description">Gather official documents, court records, and verified media reports</div>
                    </div>
                    <div class="process-card">
                        <div class="process-number">3</div>
                        <div class="process-title">Verification</div>
                        <div class="process-description">Cross-reference all claims with multiple independent sources</div>
                    </div>
                    <div class="process-card">
                        <div class="process-number">4</div>
                        <div class="process-title">Analysis</div>
                        <div class="process-description">Examine patterns, timelines, and systemic failures</div>
                    </div>
                    <div class="process-card">
                        <div class="process-number">5</div>
                        <div class="process-title">Documentation</div>
                        <div class="process-description">Create comprehensive source archives for transparency</div>
                    </div>
                    <div class="process-card">
                        <div class="process-number">6</div>
                        <div class="process-title">Publication</div>
                        <div class="process-description">Release findings with full source documentation</div>
                    </div>
                </div>

                <h2>Case Documentation Protocol</h2>

                <div class="methodology-step">
                    <h4>Source Collection Phase</h4>
                    <p>Comprehensive gathering of all available primary sources, including government documents, court records, and official statements. We prioritize Freedom of Information Act (FOIA) requests and public records access.</p>
                </div>

                <div class="methodology-step">
                    <h4>Timeline Development</h4>
                    <p>Creation of detailed chronological sequences based on verified dates and events. All timeline entries include source attribution and verification status.</p>
                </div>

                <div class="methodology-step">
                    <h4>Pattern Analysis</h4>
                    <p>Systematic examination of institutional decisions, policy applications, and procedural outcomes to identify recurring themes and systemic issues.</p>
                </div>

                <div class="methodology-step">
                    <h4>Comparative Research</h4>
                    <p>International and jurisdictional comparisons to provide context and identify alternative approaches that have proven more effective.</p>
                </div>

                <div class="methodology-step">
                    <h4>Reform Recommendations</h4>
                    <p>Development of evidence-based policy suggestions grounded in successful implementations from other jurisdictions and academic research.</p>
                </div>

                <h2>Quality Control Standards</h2>

                <p>Our international comparisons follow established academic and policy research methodologies:</p>

                <ul>
                    <li><strong>Statistical Sources:</strong> UN Office on Drugs and Crime (UNODC), World Health Organization (WHO), and national statistical agencies</li>
                    <li><strong>Policy Analysis:</strong> Examination of legal frameworks, judicial procedures, and enforcement mechanisms</li>
                    <li><strong>Outcome Measurement:</strong> Focus on public safety outcomes, recidivism rates, and institutional effectiveness</li>
                    <li><strong>Contextual Factors:</strong> Consideration of cultural, economic, and social differences when making comparisons</li>
                </ul>

                <h2>Commitment to Accuracy</h2>
                <p>We prioritize accuracy over speed and are committed to correcting any errors that come to light. Our methodology emphasizes thorough verification and transparent documentation to maintain the highest standards of investigative journalism.</p>
            </div>
        </div>
    </div>

    <!-- ======= FOOTER ======= -->
    <div class="footer">
        <p>&copy; 2025 Broken Institutions.</p>
        <p>For tips or questions: <a href="https://www.instagram.com/brokeninstitutions" target="_blank">@brokeninstitutions on Instagram</a></p>
    </div>


    <script>
        // Case data
        const allCases = [
            {
                id: "charlotte-transit",
                title: "Charlotte Transit Case: \"What Enabled Him?\"",
                summary: "Investigation into institutional failures that enabled the Charlotte transit tragedy. Examining 14 arrests, judicial decisions, and systemic breakdowns that preceded the fatal incident.",
                category: "Judicial System",
                tags: ["judicial immunity", "pre-trial release", "mental health", "public safety", "institutional failure"],
                date: new Date("2025-08-22"),
                element: null
            }
        ];

        // Tab functionality
        function openTab(evt, tabName) {
            var i, tabcontent, tablinks;
            
            tabcontent = document.getElementsByClassName("tab-panel");
            for (i = 0; i < tabcontent.length; i++) {
                tabcontent[i].classList.remove("active");
            }
            
            tablinks = document.getElementsByClassName("tab-button");
            for (i = 0; i < tablinks.length; i++) {
                tablinks[i].classList.remove("active");
            }
            
            document.getElementById(tabName).classList.add("active");
            evt.currentTarget.classList.add("active");
        }

        // Theme toggle functionality
        function toggleTheme(event) {
            if (event) {
                event.preventDefault();
                event.stopPropagation();
            }

            const body = document.body;
            const html = document.documentElement;
            const toggles = document.querySelectorAll('.theme-toggle');

            // Toggle both body class and html data attribute
            body.classList.toggle('light-theme');

            if (body.classList.contains('light-theme')) {
                html.setAttribute('data-theme', 'light');
                localStorage.setItem('theme', 'light');
            } else {
                html.removeAttribute('data-theme');
                localStorage.setItem('theme', 'dark');
            }

            toggles.forEach(toggle => {
                toggle.classList.toggle('light');
            });

            console.log('Theme toggled to:', body.classList.contains('light-theme') ? 'light' : 'dark');
        }

        // Filter functionality
        function filterCases() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const categoryFilter = document.getElementById('categoryFilter').value;
            const tagFilter = document.getElementById('tagFilter').value;
            const sortFilter = document.getElementById('sortFilter').value;
            
            let filteredCases = allCases.filter(caseItem => {
                const matchesSearch = caseItem.title.toLowerCase().includes(searchTerm) || 
                                    caseItem.summary.toLowerCase().includes(searchTerm);
                const matchesCategory = !categoryFilter || caseItem.category === categoryFilter;
                const matchesTag = !tagFilter || caseItem.tags.includes(tagFilter);
                
                return matchesSearch && matchesCategory && matchesTag;
            });

            // Sort cases
            switch(sortFilter) {
                case 'oldest':
                    filteredCases.sort((a, b) => a.date - b.date);
                    break;
                case 'title':
                    filteredCases.sort((a, b) => a.title.localeCompare(b.title));
                    break;
                case 'newest':
                default:
                    filteredCases.sort((a, b) => b.date - a.date);
                    break;
            }

            // Update display
            const casesContainer = document.getElementById('casesContainer');
            const allCaseElements = casesContainer.children;
            
            // Hide all cases first
            for (let element of allCaseElements) {
                element.style.display = 'none';
            }
            
            // Show filtered cases
            filteredCases.forEach(caseItem => {
                if (caseItem.element) {
                    caseItem.element.style.display = 'block';
                } else {
                    // Find the case element by data attributes
                    for (let element of allCaseElements) {
                        const category = element.getAttribute('data-category');
                        const tags = element.getAttribute('data-tags');
                        
                        if (category === caseItem.category && tags && tags.includes(caseItem.tags[0])) {
                            element.style.display = 'block';
                            caseItem.element = element;
                            break;
                        }
                    }
                }
            });

            // Update results count
            const resultsCount = document.getElementById('resultsCount');
            resultsCount.textContent = `Showing ${filteredCases.length} of ${allCases.length} investigations`;
        }

        // Initialize search functionality
        function initializeSearch() {
            const searchInput = document.getElementById('searchInput');
            const categoryFilter = document.getElementById('categoryFilter');
            const tagFilter = document.getElementById('tagFilter');
            const sortFilter = document.getElementById('sortFilter');

            searchInput.addEventListener('input', filterCases);
            categoryFilter.addEventListener('change', filterCases);
            tagFilter.addEventListener('change', filterCases);
            sortFilter.addEventListener('change', filterCases);

            // Initialize case elements
            const casesContainer = document.getElementById('casesContainer');
            const caseElements = casesContainer.children;
            
            for (let i = 0; i < caseElements.length && i < allCases.length; i++) {
                allCases[i].element = caseElements[i];
            }

            filterCases();
        }


        // Initialize everything
        document.addEventListener('DOMContentLoaded', function() {
            // Sync toggle buttons with current theme
            if (document.documentElement.getAttribute('data-theme') === 'light') {
                document.querySelectorAll('.theme-toggle').forEach(toggle => {
                    toggle.classList.add('light');
                });
            }
            
            initializeSearch();

            // Add robust theme toggle listeners
            document.querySelectorAll('.theme-toggle').forEach(toggle => {
                toggle.addEventListener('click', toggleTheme);
                toggle.addEventListener('touchend', function(e) {
                    e.preventDefault();
                    toggleTheme(e);
                });
            });
        });
    </script>
</body>
</html>